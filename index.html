<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gajju Bomma: Alive</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Montserrat:wght@300&display=swap');

        :root {
            --bg: #050508;
            --soul-color: #00d2ff; /* Default Happy Color */
            --soul-pain: #ff0044;  /* Red Mode Color */
            --shadow: #1a1a1a;
            --gold: #ffd700;
        }

        body {
            margin: 0;
            overflow: hidden;
            background: var(--bg);
            font-family: 'Montserrat', sans-serif;
            color: white;
            touch-action: none; /* For mobile interaction */
        }

        #world {
            position: absolute;
            top: 0; left: 0;
            z-index: 1;
        }

        /* HUD (Heads Up Display) */
        #hud {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 10;
            pointer-events: none;
        }

        h1 {
            font-family: 'Cinzel', serif;
            font-size: 1.5rem;
            margin: 0;
            background: linear-gradient(to right, #fff, var(--gold));
            -webkit-background-clip: text;
            color: transparent;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }

        p.status {
            font-size: 0.8rem;
            opacity: 0.7;
            margin-top: 5px;
        }

        /* Controls */
        #controls {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
            display: flex;
            gap: 20px;
        }

        .btn-mode {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 12px 24px;
            border-radius: 50px;
            cursor: pointer;
            backdrop-filter: blur(10px);
            font-family: 'Montserrat', sans-serif;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
        }

        .btn-mode:hover { background: white; color: black; box-shadow: 0 0 20px white; }
        
        .btn-pain { border-color: #ff0044; color: #ffcccc; }
        .btn-pain:hover { background: #ff0044; color: white; box-shadow: 0 0 30px #ff0044; }

        .btn-night { border-color: #444; color: #aaa; }
        .btn-night:hover { background: #333; color: white; box-shadow: 0 0 30px #000; }

        /* Instructions Overlay */
        #intro {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 20;
            background: rgba(0,0,0,0.8);
            padding: 40px;
            border-radius: 20px;
            border: 1px solid var(--gold);
            animation: fadeOut 1s ease 5s forwards;
            pointer-events: none;
        }
        
        @keyframes fadeOut { 0% {opacity: 1;} 80% {opacity: 1;} 100% {opacity: 0; visibility: hidden;} }

    </style>
</head>
<body>

    <canvas id="world"></canvas>

    <div id="hud">
        <h1>Gajju Bomma</h1>
        <p class="status" id="status-text">State: Happy & Free</p>
    </div>

    <div id="intro">
        <h2 style="font-family: 'Cinzel'; color: var(--gold);">Do not just watch.</h2>
        <p>She is alive. She feels pain. She feels fear.</p>
        <p><strong>Red Mode:</strong> Soothe her pain with your touch.</p>
        <p><strong>Night Mode:</strong> Shield her from the shadows.</p>
        <p style="margin-top:20px; font-size: 0.8rem; color: #888;">(Starting simulation...)</p>
    </div>

    <div id="controls">
        <button class="btn-mode btn-pain" onclick="togglePainMode()">Activate "Red Days"</button>
        <button class="btn-mode btn-night" onclick="toggleNightMode()">Enter "The Night"</button>
    </div>

    <script>
        /**
         * THE ENGINE: "PRANA" (Life Force)
         * Simulates emotion through physics.
         */
        const canvas = document.getElementById('world');
        const ctx = canvas.getContext('2d');
        const statusText = document.getElementById('status-text');

        let width, height;
        let mouse = { x: 0, y: 0 };
        let isTouching = false; // Is the user touching/soothing?
        
        // GAME STATES
        let isPainMode = false; // "Red Days"
        let isNightMode = false; // "Safety Threat"
        let soulHealth = 100; // 0 = Shattered, 100 = Blooming

        // THE SOUL (Gajju Bomma)
        const soul = {
            x: 0, y: 0,
            radius: 60,
            baseRadius: 60,
            color: '#00d2ff',
            vibration: 0,
            pulseSpeed: 0.02
        };

        // PARTICLES (Emotions/Threats)
        let particles = [];
        let threats = [];

        // INITIALIZATION
        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
            soul.x = width / 2;
            soul.y = height / 2;
        }
        window.addEventListener('resize', resize);
        resize();

        // MOUSE TRACKING
        window.addEventListener('mousemove', e => {
            mouse.x = e.clientX;
            mouse.y = e.clientY;
            checkInteraction();
        });
        window.addEventListener('touchmove', e => {
            mouse.x = e.touches[0].clientX;
            mouse.y = e.touches[0].clientY;
            checkInteraction();
        });

        function checkInteraction() {
            const dist = Math.hypot(mouse.x - soul.x, mouse.y - soul.y);
            isTouching = dist < soul.radius + 50; // Near the soul
        }

        // --- MODES ---
        
        function togglePainMode() {
            isPainMode = !isPainMode;
            isNightMode = false; // Reset other mode
            updateState();
        }

        function toggleNightMode() {
            isNightMode = !isNightMode;
            isPainMode = false; // Reset other mode
            updateState();
        }

        function updateState() {
            if (isPainMode) {
                soul.color = '#ff0044'; // Red
                soul.vibration = 10; // High vibration (Pain)
                statusText.innerText = "State: The Red Days (She is in pain. Soothe her.)";
                statusText.style.color = "#ffcccc";
                document.body.style.background = "#1a0505"; // Dark Red BG
            } else if (isNightMode) {
                soul.color = '#ffffff'; // Vulnerable White
                soul.vibration = 2; // Trembling fear
                statusText.innerText = "State: The Walk Home (Protect her from Shadows!)";
                statusText.style.color = "#ccc";
                document.body.style.background = "#000000"; // Pitch Black
            } else {
                soul.color = '#00d2ff'; // Happy Blue
                soul.vibration = 0;
                statusText.innerText = "State: Happy & Free";
                statusText.style.color = "#fff";
                document.body.style.background = "#050508";
                threats = []; // Clear threats
            }
        }

        // --- CLASSES ---

        class Particle {
            constructor(x, y, type) {
                this.x = x;
                this.y = y;
                this.type = type; // 'heal', 'flower'
                this.size = Math.random() * 3 + 1;
                this.vx = (Math.random() - 0.5) * 2;
                this.vy = (Math.random() - 0.5) * 2;
                this.life = 100;
                this.hue = Math.random() * 50 + 200; // Blueish
                if (type === 'flower') this.hue = Math.random() * 60 + 300; // Pink/Purple
            }
            update() {
                this.x += this.vx;
                this.y += this.vy;
                this.life -= 1;
                this.size *= 0.96;
            }
            draw() {
                ctx.fillStyle = `hsla(${this.hue}, 100%, 70%, ${this.life/100})`;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI*2);
                ctx.fill();
            }
        }

        class Threat {
            constructor() {
                // Spawn from edges
                const side = Math.floor(Math.random() * 4);
                if(side === 0) { this.x = Math.random() * width; this.y = -20; }
                if(side === 1) { this.x = width + 20; this.y = Math.random() * height; }
                if(side === 2) { this.x = Math.random() * width; this.y = height + 20; }
                if(side === 3) { this.x = -20; this.y = Math.random() * height; }

                this.size = Math.random() * 5 + 5;
                this.speed = Math.random() * 1.5 + 1;
                this.angle = Math.atan2(soul.y - this.y, soul.x - this.x);
                this.vx = Math.cos(this.angle) * this.speed;
                this.vy = Math.sin(this.angle) * this.speed;
                this.blocked = false;
            }
            update() {
                if (this.blocked) {
                    this.vx *= 0.9;
                    this.vy *= 0.9;
                    this.size *= 0.9;
                    return; // Fade out
                }

                // Move towards soul
                this.x += this.vx;
                this.y += this.vy;

                // Check collision with Shield (Mouse)
                const distMouse = Math.hypot(this.x - mouse.x, this.y - mouse.y);
                if (distMouse < 60) {
                    this.blocked = true;
                    this.vx = -this.vx * 2; // Bounce back
                    this.vy = -this.vy * 2;
                    createParticles(this.x, this.y, 'heal', 5); // Sparks
                }

                // Check collision with Soul
                const distSoul = Math.hypot(this.x - soul.x, this.y - soul.y);
                if (distSoul < soul.radius) {
                    this.blocked = true;
                    soulHealth -= 10;
                    soul.vibration = 20; // Ouch
                    createParticles(this.x, this.y, 'heal', 10);
                    // Flash red
                    document.body.style.backgroundColor = "red";
                    setTimeout(() => document.body.style.backgroundColor = "#000", 50);
                }
            }
            draw() {
                ctx.fillStyle = this.blocked ? "#555" : "#fff";
                ctx.beginPath();
                // Draw as an "Eye" or "Spike"
                ctx.arc(this.x, this.y, this.size, 0, Math.PI*2);
                ctx.fill();
                
                if (!this.blocked) {
                    ctx.strokeStyle = "red";
                    ctx.lineWidth = 1;
                    ctx.stroke();
                }
            }
        }

        function createParticles(x, y, type, count) {
            for(let i=0; i<count; i++) particles.push(new Particle(x, y, type));
        }

        // --- MAIN LOOP ---

        function loop() {
            // Trail effect
            ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
            ctx.fillRect(0, 0, width, height);

            const time = Date.now() * 0.001;

            // 1. UPDATE SOUL LOGIC
            let shakeX = 0;
            let shakeY = 0;

            if (isPainMode) {
                // Simulation: Pain makes her shake
                if (isTouching) {
                    // If user is soothing (touching), vibration reduces
                    soul.vibration = Math.max(0, soul.vibration - 0.2);
                    createParticles(mouse.x, mouse.y, 'heal', 1);
                    // Reward mechanism: Flowers bloom if you soothe enough
                    if (Math.random() > 0.9) createParticles(soul.x + (Math.random()-0.5)*100, soul.y + (Math.random()-0.5)*100, 'flower', 1);
                } else {
                    soul.vibration = Math.min(15, soul.vibration + 0.1); // Pain returns if you leave
                }
                
                // Physics of shaking
                shakeX = (Math.random() - 0.5) * soul.vibration;
                shakeY = (Math.random() - 0.5) * soul.vibration;
            }

            if (isNightMode) {
                // Spawner
                if (Math.random() > 0.95) threats.push(new Threat());
            }

            // Draw Soul
            const pulse = Math.sin(time * 2) * 5;
            const currentRadius = soul.baseRadius + pulse;
            
            // Glow
            const glow = ctx.createRadialGradient(soul.x + shakeX, soul.y + shakeY, currentRadius * 0.2, soul.x + shakeX, soul.y + shakeY, currentRadius * 3);
            glow.addColorStop(0, soul.color);
            glow.addColorStop(1, 'rgba(0,0,0,0)');
            
            ctx.fillStyle = glow;
            ctx.beginPath();
            ctx.arc(soul.x + shakeX, soul.y + shakeY, currentRadius * 3, 0, Math.PI*2);
            ctx.fill();

            // Core
            ctx.fillStyle = 'white';
            ctx.beginPath();
            ctx.arc(soul.x + shakeX, soul.y + shakeY, currentRadius * 0.8, 0, Math.PI*2);
            ctx.fill();

            // 2. UPDATE ENTITIES
            particles.forEach((p, index) => {
                p.update();
                p.draw();
                if(p.life <= 0) particles.splice(index, 1);
            });

            threats.forEach((t, index) => {
                t.update();
                t.draw();
                if(t.size < 1) threats.splice(index, 1);
            });

            // 3. DRAW CURSOR SHIELD (Only visible in Night Mode)
            if (isNightMode) {
                ctx.beginPath();
                ctx.strokeStyle = "white";
                ctx.lineWidth = 3;
                ctx.arc(mouse.x, mouse.y, 40, 0, Math.PI*2);
                ctx.stroke();
                ctx.shadowBlur = 20;
                ctx.shadowColor = "white";
                ctx.stroke();
                ctx.shadowBlur = 0;
            }

            requestAnimationFrame(loop);
        }

        loop();

    </script>
</body>
</html>
